<script src="/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>

<script src="/lib/require.js"></script> 
<script src="/lib/jquery-ui/jquery.js"></script>

<script src="/lib/jquery-ui/jquery-ui.js"></script>
<link href="/lib/jquery-ui/css/smoothness/jquery-ui.css" rel="Stylesheet" type="text/css" />

<link rel="stylesheet" type="text/css" href="editor_tools.css" />

<body>

  <div style="position:absolute; width: 50%; height: 50%; left: 10px; top: 5px;">

<div id="editor" style="height: 500px; width: 100% ">
  A prime number is a circular prime 
  if all numbers generated by cyclically permuting of its digits are prime.\\\\
  For example, $197$ is a circular prime, because $971$ and $719$ also primes.
</div>
</div>

    <script type="text/javascript">
        require.config({
            paths: {
                    "main": "editor_utils.min",
                    "sally_client" : "extlibs/sally_client",
                    "EventEmitter" : "/lib/EventEmitter.min",
                    "theo" : "extlibs/theo",
                    "frames" : "extlibs/frames",
                    "mathhubdocument" : "extlibs/mathhubdocument",
            }
        });

        editor = ace.edit("editor");
        editor.setTheme("ace/theme/textmate");

        editor.getSession().setMode("ace/mode/latex");
        require(["editor_tools/main", "sally_client", "theo", "frames", "mathhubdocument"], function(EditorTools, SallyClient, Theo, Frames, MathHubDocument) {
            var env = null;
            editor_tools = new EditorTools(editor, "#editor");

            toolbar = editor_tools.getToolbar();

            var theo = new Theo();
            var frames = new Frames();
            var mathHubDocument = new MathHubDocument(editor, "smglom/mv/source/defeq.en.tex", "web");
            
            frames.on("NewDocLevelService", function(msg) {
              toolbar.addItem(msg.id, msg.icon, function() {
                frames.executeDocLevelService(msg.id);
              });
            });

            frames.on("RemoveDocLevelService", function(msg) {
              toolbar.removeItem(msg.id)
            });

            client = new SallyClient({stompUrl: "ws://localhost:61614", stompUser : "webclient", stompPassword : "webclient"});

            client.register([theo, frames, mathHubDocument], "env"+Math.floor(Math.random()*100000), function() {
              frames.listenDocLevelServices();
            });

        });


</script>
</body>
